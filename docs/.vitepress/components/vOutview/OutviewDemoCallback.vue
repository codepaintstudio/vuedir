<template>
    <div class="advanced-container">
        <div class="scroll-section">
            <h2 class="demo-title">é«˜çº§æ»šåŠ¨æ£€æµ‹</h2>
            <p class="demo-description">å¯é…ç½®IntersectionObserverå‚æ•°ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è·å–è¯¦ç»†è§¦å‘ä¿¡æ¯</p>

            <!-- é«˜çº§ç”¨æ³•æ¼”ç¤ºåŒºåŸŸ -->
            <div class="config-card">
                <div class="config-options">
                    <h3><i class="icon-config"></i> å½“å‰é…ç½®</h3>
                    <ul>
                        <li><span>root:</span> null (è§†çª—)</li>
                        <li><span>rootMargin:</span> '10px'</li>
                        <li><span>threshold:</span> 0.1</li>
                        <li><span>once:</span> false</li>
                    </ul>
                </div>

                <div v-out-view="{
                    handler: handleLeaveAdvanced,
                    options: {
                        root: null,
                        rootMargin: '10px',
                        threshold: 0.1,
                        once: false
                    }
                }" class="advanced-demo-box">
                    <div class="demo-content">
                        <i class="icon-observer"></i>
                        <h3>é«˜çº§ç”¨æ³•æ¼”ç¤º</h3>
                        <p>æ»šåŠ¨æˆ‘ç¦»å¼€è§†å£æ—¶ä¼šåœ¨æ§åˆ¶å°æ‰“å°è¯¦ç»†ä¿¡æ¯</p>
                        <p class="hint-text">è¯·æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è§¦å‘æ—¥å¿—</p>
                    </div>
                </div>
            </div>

            <div class="box"></div>
        </div>
    </div>
</template>

<script lang="ts" setup>
import { vOutView } from '@cp-vuedir/core';
import { Message } from '@arco-design/web-vue';

const handleLeaveAdvanced = (entry: IntersectionObserverEntry) => {
    Message.success(`è§¦å‘æ—¶é—´ï¼š` + new Date(entry.time).toLocaleTimeString())
    Message.success(`è§†å£äº¤å‰æ¯”ä¾‹ï¼š` + entry.intersectionRatio)
    Message.success(`æ˜¯å¦å®Œå…¨ç¦»å¼€ï¼š` + (entry.isIntersecting ? 'å¦' : 'æ˜¯'))
};
</script>

<style scoped>
.advanced-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}

.scroll-section {
    min-height: 50vh;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.demo-title {
    color: #2c3e50;
    margin-bottom: 8px;
    font-size: 24px;
}

.demo-description {
    color: #7f8c8d;
    margin-bottom: 24px;
}

.config-card {
    display: flex;
    gap: 20px;
    margin-bottom: 30px;
}

.config-options {
    flex: 1;
    padding: 16px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.config-options h3 {
    color: #34495e;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.config-options li {
    margin: 8px 0;
    color: #555;
}

.config-options span {
    color: #3498db;
    font-weight: 500;
}

.advanced-demo-box {
    flex: 2;
    padding: 30px;
    border: 1px dashed #bdc3c7;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.demo-content {
    text-align: center;
}

.demo-content h3 {
    color: #2980b9;
    margin: 12px 0;
}

.hint-text {
    font-size: 12px;
    color: #e74c3c;
    margin-top: 10px;
}

.icon-config:before {
    content: "âš™ï¸";
}

.icon-observer:before {
    content: "ğŸ‘€";
    font-size: 28px;
    display: block;
    margin-bottom: 10px;
}
</style>